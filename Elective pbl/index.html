<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BlockSecured Consortium | Art-Tech</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800&family=Space+Grotesk:wght@300;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    
    <style>
        :root {
            /* --- COLOR PALETTE --- */
            --bg-void: #030005;
            --primary: #8b5cf6;       /* Vivid Violet */
            --primary-glow: rgba(139, 92, 246, 0.5);
            --accent: #d946ef;        /* Hot Magenta */
            --accent-glow: rgba(217, 70, 239, 0.5);
            --cyan: #06b6d4;
            
            --glass-bg: rgba(15, 10, 30, 0.65);
            --glass-border: rgba(139, 92, 246, 0.25);
            --glass-highlight: rgba(255, 255, 255, 0.08);
            
            --text-main: #ffffff;
            --text-muted: #94a3b8;
            
            --success: #10b981;
            --danger: #f43f5e;
            
            --font-main: 'Outfit', sans-serif;
            --font-display: 'Space Grotesk', sans-serif;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: var(--font-main); }

        body {
            background-color: var(--bg-void);
            color: var(--text-main);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            overflow-x: hidden;
            position: relative;
        }

        /* --- BACKGROUND ART (PAINT STREAKS) --- */
        .bg-art {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1;
            background: var(--bg-void);
            overflow: hidden;
        }
        
        .paint-streak {
            position: absolute;
            border-radius: 50%;
            filter: blur(80px);
            opacity: 0.6;
            animation: floatPaint 15s infinite alternate ease-in-out;
        }

        /* Deep Purple Swirl */
        .streak-1 { top: -10%; left: -10%; width: 50vw; height: 50vw; background: radial-gradient(circle, #4c1d95 0%, transparent 70%); animation-delay: 0s; }
        /* Magenta Slash */
        .streak-2 { bottom: 10%; right: -5%; width: 60vw; height: 40vw; background: linear-gradient(45deg, #701a75, #a21caf); transform: rotate(-20deg); animation-delay: -5s; }
        /* Cyan Highlight */
        .streak-3 { top: 40%; left: 30%; width: 30vw; height: 30vw; background: radial-gradient(circle, rgba(6, 182, 212, 0.15) 0%, transparent 60%); animation-duration: 20s; }
        
        @keyframes floatPaint {
            0% { transform: translate(0, 0) scale(1); }
            100% { transform: translate(20px, -20px) scale(1.1); }
        }

        /* Grid Overlay for Texture */
        .grid-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1;
            background-image: linear-gradient(rgba(255,255,255,0.03) 1px, transparent 1px),
            linear-gradient(90deg, rgba(255,255,255,0.03) 1px, transparent 1px);
            background-size: 50px 50px;
            pointer-events: none;
        }

        /* --- UTILS & ANIMATIONS --- */
        .fade-in { animation: fadeIn 0.8s cubic-bezier(0.2, 0.8, 0.2, 1); }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(30px) scale(0.98); } to { opacity: 1; transform: translateY(0) scale(1); } }
        .hidden { display: none !important; }

        /* --- UI COMPONENTS --- */
        
        /* Buttons */
        .btn {
            padding: 16px 32px; border-radius: 12px; border: none; cursor: pointer;
            font-weight: 700; transition: all 0.3s ease; width: 100%; font-size: 1rem;
            letter-spacing: 0.5px; position: relative; overflow: hidden;
            font-family: var(--font-display); text-transform: uppercase;
        }
        .btn-primary { 
            background: linear-gradient(135deg, var(--primary), var(--accent));
            color: white; 
            box-shadow: 0 0 20px var(--primary-glow);
            border: 1px solid rgba(255,255,255,0.2);
        }
        .btn-primary:hover { 
            box-shadow: 0 0 40px var(--accent-glow); 
            transform: translateY(-2px);
            letter-spacing: 2px;
        }

        .btn-danger { background: rgba(244, 63, 94, 0.15); border: 1px solid var(--danger); color: var(--danger); }
        .btn-danger:hover { background: var(--danger); color: white; box-shadow: 0 0 20px rgba(244, 63, 94, 0.6); }

        .btn-outline { background: transparent; border: 1px solid var(--text-muted); color: var(--text-main); }
        .btn-outline:hover { border-color: var(--cyan); color: var(--cyan); box-shadow: 0 0 15px rgba(6, 182, 212, 0.3); }

        /* Inputs */
        .input-box {
            background: rgba(0,0,0,0.5); 
            border: 1px solid var(--glass-border);
            padding: 18px; border-radius: 12px; color: white; width: 100%; margin-bottom: 20px; font-size: 1rem;
            transition: 0.3s;
        }
        .input-box:focus { 
            outline: none; border-color: var(--accent); 
            box-shadow: 0 0 20px var(--accent-glow); 
            background: rgba(0,0,0,0.8);
        }
        textarea.input-box { resize: vertical; min-height: 100px; }

        /* --- LAYOUTS --- */
        .navbar {
            width: 100%; padding: 25px 50px;
            display: flex; justify-content: space-between; align-items: center;
            background: rgba(3, 0, 5, 0.7); backdrop-filter: blur(15px);
            border-bottom: 1px solid rgba(255,255,255,0.05);
            position: sticky; top: 0; z-index: 100;
        }
        .brand { 
            font-family: var(--font-display);
            font-size: 1.8rem; font-weight: 800; 
            background: linear-gradient(to right, #fff, var(--primary), var(--accent)); 
            background-clip: text; -webkit-background-clip: text; 
            -webkit-text-fill-color: transparent; 
        }

        .container { width: 100%; max-width: 1200px; margin: 0 auto; padding: 40px 20px; flex: 1; position: relative; z-index: 1; }

        /* --- AUTH SECTION --- */
        .auth-wrapper {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            display: flex; justify-content: center; align-items: center;
            z-index: 200;
        }
        .auth-container {
            width: 100%; max-width: 450px;
            background: var(--glass-bg); backdrop-filter: blur(25px);
            border: 1px solid var(--glass-border);
            border-top: 1px solid rgba(255,255,255,0.3);
            border-radius: 30px; padding: 50px;
            box-shadow: 0 30px 60px rgba(0,0,0,0.8);
            position: relative; overflow: hidden;
        }
        /* Aesthetic gloss line */
        .auth-container::before {
            content:''; position: absolute; top: 0; left: -50%; width: 100%; height: 100%;
            background: linear-gradient(to right, transparent, rgba(255,255,255,0.05), transparent);
            transform: skewX(-25deg); pointer-events: none;
        }

        .tabs { display: flex; margin-bottom: 30px; background: rgba(0,0,0,0.4); padding: 5px; border-radius: 14px; border: 1px solid rgba(255,255,255,0.1); }
        .tab { 
            flex: 1; padding: 12px; text-align: center; cursor: pointer; border-radius: 10px; 
            color: var(--text-muted); transition: 0.4s; font-weight: 600; font-size: 0.9rem;
        }
        .tab.active { background: var(--primary); color: white; box-shadow: 0 4px 15px var(--primary-glow); }

        /* --- DASHBOARD ELEMENTS --- */
        .stats-bar { display: flex; gap: 20px; margin-top: 40px; flex-wrap: wrap; }
        .stat-card {
            flex: 1; background: var(--glass-bg); border: 1px solid var(--glass-border);
            padding: 30px; border-radius: 20px;
            display: flex; align-items: center; gap: 25px; min-width: 250px;
            transition: 0.3s;
        }
        .stat-card:hover { transform: translateY(-5px); border-color: var(--accent); box-shadow: 0 10px 40px rgba(0,0,0,0.5); }
        .stat-num { font-size: 3rem; font-weight: 800; color: white; font-family: var(--font-display); }
        .stat-label { font-size: 0.85rem; color: var(--accent); text-transform: uppercase; letter-spacing: 2px; font-weight: 700; }

        .menu-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 30px; margin-top: 40px; }
        .menu-card {
            background: linear-gradient(160deg, rgba(255,255,255,0.03) 0%, rgba(255,255,255,0.01) 100%);
            backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border); border-radius: 24px; padding: 50px 30px;
            text-align: center; cursor: pointer; transition: all 0.5s cubic-bezier(0.2, 0.8, 0.2, 1);
            position: relative; overflow: hidden;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
        }
        .menu-card:hover { 
            transform: translateY(-10px) scale(1.02); 
            border-color: var(--accent); 
            background: linear-gradient(160deg, rgba(217, 70, 239, 0.1) 0%, rgba(0,0,0,0) 100%);
            box-shadow: 0 20px 50px rgba(0,0,0,0.6); 
        }
        .menu-icon { font-size: 4rem; margin-bottom: 25px; filter: drop-shadow(0 0 15px rgba(255,255,255,0.2)); transition: 0.5s; }
        .menu-card:hover .menu-icon { transform: scale(1.2) rotate(10deg); filter: drop-shadow(0 0 25px var(--accent-glow)); }
        .menu-title { font-size: 1.5rem; font-weight: 700; margin-bottom: 10px; color: white; font-family: var(--font-display); }
        .menu-desc { font-size: 1rem; color: var(--text-muted); }

        /* --- CONTENT VIEWS --- */
        .view-section { 
            background: var(--glass-bg); backdrop-filter: blur(20px);
            border-radius: 30px; padding: 50px; 
            border: 1px solid var(--glass-border); 
            min-height: 60vh; position: relative; 
            box-shadow: 0 20px 80px rgba(0,0,0,0.5);
        }
        .view-header { 
            display: flex; justify-content: space-between; align-items: center; 
            margin-bottom: 50px; padding-bottom: 25px; 
            border-bottom: 1px solid rgba(255,255,255,0.1); 
        }
        .view-title { 
            font-family: var(--font-display);
            font-size: 2.2rem; font-weight: 700; 
            background: linear-gradient(90deg, #fff, var(--text-muted)); 
            background-clip: text; -webkit-background-clip: text; 
            -webkit-text-fill-color: transparent; 
        }
        .back-btn { cursor: pointer; color: var(--cyan); display: flex; align-items: center; gap: 10px; font-weight: 600; font-size: 1.1rem; transition: 0.3s; }
        .back-btn:hover { color: white; transform: translateX(-5px); text-shadow: 0 0 10px var(--cyan); }

        /* --- SNAKE GRID (BLOCKCHAIN VIZ) --- */
        .snake-wrapper {
            display: flex; flex-direction: column; align-items: flex-start;
            width: 870px; margin: 0 auto; padding: 40px 0;
        }
        .snake-row { display: flex; justify-content: flex-start; gap: 50px; width: 100%; margin-bottom: 60px; position: relative; }
        .snake-row.reverse { flex-direction: row-reverse; }

        .block-node {
            width: 180px; height: 180px;
            background: rgba(0, 0, 0, 0.7); 
            border: 2px solid var(--primary); 
            border-radius: 30px;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            cursor: pointer; transition: 0.5s; position: relative;
            box-shadow: inset 0 0 30px rgba(139, 92, 246, 0.2);
            flex-shrink: 0;
        }
        /* Connectors */
        .block-node:not(:last-child)::after {
            content: ''; position: absolute; right: -50px; width: 50px; height: 4px;
            background: linear-gradient(90deg, var(--primary), var(--accent));
            top: 50%; transform: translateY(-50%); opacity: 0.6;
            box-shadow: 0 0 10px var(--primary);
        }
        .snake-row.reverse .block-node:not(:last-child)::after { left: -50px; right: auto; }
        .snake-row:not(:last-of-type) .block-node:last-child::before {
            content: ''; position: absolute; bottom: -60px; left: 50%; transform: translateX(-50%);
            width: 4px; height: 60px;
            background: linear-gradient(180deg, var(--primary), var(--accent));
            opacity: 0.6; box-shadow: 0 0 10px var(--primary);
        }

        .block-node:hover { 
            transform: scale(1.15) rotate(2deg); 
            border-color: var(--accent); 
            background: rgba(20, 0, 30, 0.9); 
            box-shadow: 0 0 50px var(--primary-glow), inset 0 0 20px var(--accent); 
            z-index: 10; 
        }
        .block-node.tampered { border-color: var(--danger); background: rgba(50, 0, 0, 0.6); animation: shake 0.5s infinite; box-shadow: 0 0 30px var(--danger); }
        @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-4px); } 75% { transform: translateX(4px); } }

        /* --- MODAL --- */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.9); backdrop-filter: blur(10px);
            display: flex; justify-content: center; align-items: center; z-index: 300;
        }
        .modal-content {
            background: #0f0720; border: 1px solid var(--accent); border-radius: 30px;
            padding: 50px; width: 90%; max-width: 600px; position: relative;
            box-shadow: 0 0 100px rgba(139, 92, 246, 0.4);
        }
        .close-modal { position: absolute; top: 25px; right: 30px; font-size: 2rem; cursor: pointer; color: var(--text-muted); transition: 0.3s; }
        .close-modal:hover { color: white; transform: rotate(90deg); }
        .hash-text { 
            font-family: 'Space Grotesk', monospace; word-break: break-all; 
            color: var(--cyan); font-size: 0.95rem; background: rgba(0,0,0,0.6); 
            padding: 15px; border-radius: 10px; margin-top: 8px; border: 1px solid rgba(255,255,255,0.1); 
        }

        /* --- ID CARD HOLOGRAPHIC --- */
        .id-card-scene { perspective: 1200px; width: 100%; max-width: 480px; margin: 20px auto; }
        .id-card-preview {
            background: linear-gradient(125deg, #0f0529, #2e1065, #000);
            border-radius: 24px; padding: 35px; border: 1px solid rgba(255,255,255,0.15);
            position: relative; overflow: hidden;
            box-shadow: 0 30px 70px rgba(0,0,0,0.7);
            transform-style: preserve-3d; transition: transform 0.6s cubic-bezier(0.2, 0.8, 0.2, 1);
        }
        .id-card-preview:hover { transform: rotateY(10deg) rotateX(10deg) translateY(-10px); }
        /* Hologram Shine */
        .id-card-preview::after {
            content: ""; position: absolute; top: -100%; left: -100%; width: 300%; height: 300%;
            background: linear-gradient(45deg, transparent 40%, rgba(255,255,255,0.1) 45%, rgba(6,182,212,0.2) 50%, rgba(217,70,239,0.2) 55%, transparent 60%);
            animation: holoShine 6s infinite linear; pointer-events: none; mix-blend-mode: overlay;
        }
        @keyframes holoShine { 0% { transform: translateY(0) translateX(0); } 100% { transform: translateY(50%) translateX(50%); } }

        .chip-container { display: flex; justify-content: space-between; align-items: flex-end; margin-bottom: 30px; }
        .chip { 
            width: 60px; height: 45px; 
            background: linear-gradient(135deg, #fbbf24, #d97706); 
            border-radius: 10px; position: relative; overflow: hidden; 
            border: 1px solid rgba(255,255,255,0.4); 
            box-shadow: inset 0 0 10px rgba(0,0,0,0.5);
        }
        
        .qr-placeholder { display: none; } 
        #qr-code-hidden { position: absolute; opacity: 0; pointer-events: none; }

        /* --- TOAST --- */
        #toast-container { position: fixed; top: 30px; right: 30px; z-index: 1000; display: flex; flex-direction: column; gap: 15px; }
        .toast {
            background: rgba(10, 5, 20, 0.9); backdrop-filter: blur(15px);
            border: 1px solid rgba(255,255,255,0.1); border-left: 5px solid var(--primary);
            padding: 20px 30px; border-radius: 12px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.6);
            display: flex; align-items: center; gap: 20px;
            animation: slideIn 0.4s cubic-bezier(0.2, 0.8, 0.2, 1); min-width: 320px;
        }
        .toast.success { border-left-color: var(--success); }
        .toast.error { border-left-color: var(--danger); }
        @keyframes slideIn { from { transform: translateX(120%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }

        /* --- REVIEWS --- */
        .review-card {
            background: rgba(255,255,255,0.03); padding: 25px; border-radius: 16px; border: 1px solid rgba(255,255,255,0.05);
            transition: 0.3s;
        }
        .review-card:hover { background: rgba(255,255,255,0.06); transform: translateY(-5px); }
        .stars { color: #fbbf24; letter-spacing: 3px; text-shadow: 0 0 10px rgba(251, 191, 36, 0.5); }
        .reviews-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 25px; margin-top: 25px; }

    </style>
</head>
<body>

    <div class="bg-art">
        <div class="paint-streak streak-1"></div>
        <div class="paint-streak streak-2"></div>
        <div class="paint-streak streak-3"></div>
    </div>
    <div class="grid-overlay"></div>

    <div id="toast-container"></div>
    <div id="qr-code-hidden"></div>
    
    <div id="auth-section" class="auth-wrapper">
        <div class="auth-container fade-in">
            <h2 style="text-align:center; margin-bottom:30px; font-weight:800; letter-spacing:1px; font-family:var(--font-display);">SECURE ID LOGIN</h2>
            
            <div class="tabs">
                <div class="tab active" onclick="switchAuthTab('user')">User</div>
                <div class="tab" onclick="switchAuthTab('admin')">Admin</div>
            </div>

            <form id="login-form" onsubmit="handleLogin(event)">
                <input type="text" id="username" class="input-box" placeholder="Username" required>
                <input type="password" id="password" class="input-box" placeholder="Password" required>
                
                <div id="admin-org-select" class="hidden" style="margin-bottom:15px;">
                    <select id="org-select" class="input-box" style="padding:10px;">
                        <option value="Gov">Ministry of Electronics (Node A)</option>
                        <option value="Bank">Reserve Bank (Node B)</option>
                        <option value="NGO">Civil Society (Node C)</option>
                    </select>
                </div>

                <button type="submit" class="btn btn-primary">Enter System</button>
            </form>
            
            <div id="user-actions" style="margin-top:25px; text-align:center; font-size:0.95rem;">
                <p style="margin-top:10px;">New Identity? <a href="#" style="color:var(--accent); font-weight:600; text-decoration:none; text-shadow:0 0 10px rgba(217, 70, 239, 0.4);" onclick="showSignup()">Create Account</a></p>
            </div>
            
            <form id="signup-form" class="hidden" onsubmit="handleSignup(event)">
                <input type="text" id="su-user" class="input-box" placeholder="New Username" required>
                <input type="password" id="su-pass" class="input-box" placeholder="New Password" required>
                <button type="submit" class="btn btn-primary">Create Account</button>
                <p style="text-align:center; margin-top:15px; cursor:pointer; color:var(--text-muted);" onclick="showLogin()">Back to Login</p>
            </form>
        </div>
    </div>

    <div id="app-layout" class="hidden">
        <nav class="navbar">
            <div class="brand">üõ°Ô∏è BlockSecured</div>
            <div style="display:flex; align-items:center; gap:25px;">
                <div style="text-align:right;">
                    <div id="nav-user-name" style="font-weight:700; font-size:1.1rem; color:white;">User</div>
                    <div id="nav-user-role" style="font-size:0.75rem; color:var(--cyan); letter-spacing:1px; text-transform:uppercase;">Role</div>
                </div>
                <button class="btn btn-danger" style="padding: 10px 20px; width:auto; font-size:0.8rem;" onclick="logout()">LOGOUT</button>
            </div>
        </nav>

        <div class="container fade-in" id="main-container">
            </div>
    </div>

    <div id="block-modal" class="modal-overlay hidden">
        <div class="modal-content fade-in">
            <span class="close-modal" onclick="closeModal()">&times;</span>
            <h2 style="color:white; margin-bottom:30px; border-bottom:1px solid rgba(255,255,255,0.1); padding-bottom:15px; font-family:var(--font-display);">Block Data</h2>
            <div id="modal-body"></div>
        </div>
    </div>

    <script>
        let currentUser = null;
        let currentRole = 'user';
        let currentOrg = ''; // For admin consortium
        const { jsPDF } = window.jspdf;

        // Default reviews
        const defaultReviews = [
            { user: "Anonymous User #128", rating: 5, text: "Proper verifications for secure use." },
            { user: "Anonymous User #042", rating: 5, text: "Finally a decentralized solution." },
            { user: "Anonymous User #891", rating: 4, text: "Good lookin site DUDE, looking forward to more features." }
        ];

        // --- NOTIFICATION SYSTEM (TOAST) ---
        function showToast(message, type = 'success') {
            const container = document.getElementById('toast-container');
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            
            const icon = type === 'success' ? '‚úÖ' : '‚ö†Ô∏è';
            
            toast.innerHTML = `
                <div style="font-size:1.5rem;">${icon}</div>
                <div>
                    <strong style="display:block; font-size:1.1rem; margin-bottom:2px; color:white;">${type === 'success' ? 'System Update' : 'Alert'}</strong>
                    <span style="color:var(--text-muted); font-size:0.9rem;">${message}</span>
                </div>
            `;
            
            container.appendChild(toast);
            
            setTimeout(() => {
                toast.style.animation = 'slideIn 0.4s reverse forwards';
                setTimeout(() => toast.remove(), 400);
            }, 4000);
        }

        // --- AUTH LOGIC ---
        function switchAuthTab(role) {
            currentRole = role;
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            event.target.classList.add('active');
            
            const signupLink = document.querySelector('#user-actions p');
            const adminOrg = document.getElementById('admin-org-select');
            
            if (role === 'admin') {
                signupLink.style.display = 'none';
                adminOrg.classList.remove('hidden');
            } else {
                signupLink.style.display = 'block';
                adminOrg.classList.add('hidden');
            }
        }

        function showSignup() {
            document.getElementById('login-form').classList.add('hidden');
            document.getElementById('user-actions').classList.add('hidden');
            document.getElementById('signup-form').classList.remove('hidden');
        }

        function showLogin() {
            document.getElementById('login-form').classList.remove('hidden');
            document.getElementById('user-actions').classList.remove('hidden');
            document.getElementById('signup-form').classList.add('hidden');
        }

        async function handleLogin(e) {
            e.preventDefault();
            const user = document.getElementById('username').value;
            const pass = document.getElementById('password').value;
            
            if (currentRole === 'admin') {
                currentOrg = document.getElementById('org-select').value;
            }

            const res = await fetch('/login', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({ username: user, password: pass, role: currentRole })
            });
            const data = await res.json();

            if(data.status === 'success') {
                currentUser = data.user;
                if(currentRole === 'admin') currentUser.org = currentOrg;
                showToast(`Welcome back, ${currentUser.username}!`);
                initApp();
            } else {
                showToast(data.message, 'error');
            }
        }

        async function handleSignup(e) {
            e.preventDefault();
            const user = document.getElementById('su-user').value;
            const pass = document.getElementById('su-pass').value;

            const res = await fetch('/signup', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({ username: user, password: pass })
            });
            const data = await res.json();
            showToast(data.message, data.status === 'success' ? 'success' : 'error');
            if(data.status === 'success') showLogin();
        }

        function logout() { location.reload(); }

        // --- APP NAVIGATION & ROUTING ---
        function initApp() {
            document.getElementById('auth-section').classList.add('hidden');
            document.getElementById('app-layout').classList.remove('hidden');
            
            if (currentUser.role === 'admin') {
                document.getElementById('nav-user-name').innerText = `Consortium Node: ${currentUser.org}`;
                document.getElementById('nav-user-role').innerText = "ADMIN ACCESS GRANTED";
            } else {
                document.getElementById('nav-user-name').innerText = currentUser.username.toUpperCase();
                document.getElementById('nav-user-role').innerText = "CITIZEN";
            }
            
            renderDashboardHome();
        }

        async function renderDashboardHome() {
            const container = document.getElementById('main-container');
            
            let totalReg = 0;
            try {
                const cRes = await fetch('/chain_data');
                const cData = await cRes.json();
                totalReg = cData.chain.length - 1; 
            } catch(e) {}

            if(currentUser.role === 'admin') {
                const canApprove = currentUser.org === 'Gov'; 
                
                let menuHtml = `
                    <div class="menu-card" onclick="loadAdminView('integrity')">
                        <div class="menu-icon">üõ°Ô∏è</div>
                        <div class="menu-title">System Integrity</div>
                        <div class="menu-desc">Audit node consensus</div>
                    </div>
                    <div class="menu-card" onclick="loadAdminView('ledger')">
                        <div class="menu-icon">üîó</div>
                        <div class="menu-title">Visual Ledger</div>
                        <div class="menu-desc">Inspect chain blocks</div>
                    </div>
                `;
                
                if(canApprove) {
                    menuHtml += `
                        <div class="menu-card" onclick="loadAdminView('pending')">
                            <div class="menu-icon">üìã</div>
                            <div class="menu-title">Approvals</div>
                            <div class="menu-desc">Mint pending identities</div>
                        </div>
                    `;
                }

                container.innerHTML = `
                    <h2 class="fade-in" style="font-family:var(--font-display); letter-spacing:1px;">CONSORTIUM CONTROL DECK</h2>
                    <div class="menu-grid fade-in">
                        ${menuHtml}
                    </div>
                    
                    <div id="admin-feedback-view" class="fade-in"></div>
                `;
                
                renderAdminFeedback();
                
            } else {
                container.innerHTML = `
                    <h2 class="fade-in" style="font-family:var(--font-display); letter-spacing:1px;">CITIZEN PORTAL</h2>
                    
                    <div class="stats-bar fade-in">
                        <div class="stat-card">
                            <div class="stat-num">${totalReg}</div>
                            <div>
                                <div class="stat-label">Total Secure</div>
                                <div class="stat-label">Identities</div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-num" style="color:#fbbf24;">5.0</div>
                            <div>
                                <div class="stat-label">User Rating</div>
                                <div style="color:#fbbf24; text-shadow:0 0 10px rgba(251, 191, 36, 0.5);">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                            </div>
                        </div>
                    </div>

                    <div class="menu-grid fade-in">
                        <div class="menu-card" onclick="loadUserView('status')">
                            <div class="menu-icon">üÜî</div>
                            <div class="menu-title">My Digital Card</div>
                            <div class="menu-desc">Holographic ID & Download</div>
                        </div>
                        <div class="menu-card" onclick="loadUserView('verify')">
                            <div class="menu-icon">üîç</div>
                            <div class="menu-title">Self-Verification</div>
                            <div class="menu-desc">Check your ID security</div>
                        </div>
                        <div class="menu-card" onclick="loadUserView('learn')">
                            <div class="menu-icon">üß†</div>
                            <div class="menu-title">System Logic</div>
                            <div class="menu-desc">How blockchain works</div>
                        </div>
                    </div>
                    
                    <div id="reviews-container"></div>
                `;
                renderReviews();
            }
        }

        // --- REVIEWS LOGIC ---
        function renderAdminFeedback() {
             const container = document.getElementById('admin-feedback-view');
             const stored = JSON.parse(localStorage.getItem('appReviews')) || defaultReviews;
             
             const reviewsHtml = stored.map(r => `
                <div class="review-card">
                    <div class="review-header" style="display:flex; justify-content:space-between; margin-bottom:10px;">
                        <strong style="color:var(--text-muted); font-size:0.9rem;">${r.user}</strong>
                        <div class="stars">${'‚òÖ'.repeat(r.rating)}</div>
                    </div>
                    <p style="font-size:0.95rem; line-height:1.4;">"${r.text}"</p>
                </div>
            `).join('');
            
            container.innerHTML = `
                <div class="reviews-section fade-in" style="margin-top:60px; padding-top:40px; border-top:1px solid rgba(255,255,255,0.1);">
                    <h3 style="margin-bottom:20px; font-family:var(--font-display);">Citizen Feedback Monitoring</h3>
                    <div class="reviews-grid">
                        ${reviewsHtml}
                    </div>
                </div>
            `;
        }

        function renderReviews() {
            const container = document.getElementById('reviews-container');
            const stored = JSON.parse(localStorage.getItem('appReviews')) || defaultReviews;
            
            const reviewsHtml = stored.map(r => `
                <div class="review-card">
                    <div class="review-header" style="display:flex; justify-content:space-between; margin-bottom:10px;">
                        <strong style="color:var(--text-muted); font-size:0.9rem;">${r.user}</strong>
                        <div class="stars">${'‚òÖ'.repeat(r.rating)}</div>
                    </div>
                    <p style="font-size:0.95rem; line-height:1.4;">"${r.text}"</p>
                </div>
            `).join('');

            container.innerHTML = `
                <div class="reviews-section fade-in" style="margin-top:60px; padding-top:40px; border-top:1px solid rgba(255,255,255,0.1);">
                    <h3 style="margin-bottom:20px; font-family:var(--font-display);">Community Reviews</h3>
                    <div class="reviews-grid">
                        ${reviewsHtml}
                    </div>
                    
                    <div style="margin-top:40px; background:rgba(255,255,255,0.03); padding:30px; border-radius:16px;">
                        <h4 style="margin-bottom:15px; color:var(--accent); font-family:var(--font-display);">Add Your Review</h4>
                        <textarea id="rev-text" class="input-box" placeholder="Write your experience..."></textarea>
                        <div style="display:flex; gap:10px; align-items:center; margin-bottom:15px;">
                            <span>Rating:</span>
                            <select id="rev-rating" class="input-box" style="width:auto; margin-bottom:0; padding:10px;">
                                <option value="5">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</option>
                                <option value="4">‚òÖ‚òÖ‚òÖ‚òÖ</option>
                                <option value="3">‚òÖ‚òÖ‚òÖ</option>
                            </select>
                        </div>
                        <button class="btn btn-primary" style="width:auto;" onclick="submitReview()">Submit Anonymous Review</button>
                    </div>
                </div>
            `;
        }

        function submitReview() {
            const text = document.getElementById('rev-text').value;
            const rating = parseInt(document.getElementById('rev-rating').value);
            
            if(!text) {
                showToast("Please write a review first", 'error');
                return;
            }

            const newRev = {
                user: `Anonymous User #${Math.floor(Math.random()*900)+100}`,
                rating: rating,
                text: text
            };

            const current = JSON.parse(localStorage.getItem('appReviews')) || defaultReviews;
            current.push(newRev);
            localStorage.setItem('appReviews', JSON.stringify(current));
            
            showToast("Review submitted successfully!");
            renderReviews();
        }

        // --- ADMIN VIEWS ---
        async function loadAdminView(view) {
            const container = document.getElementById('main-container');
            const backBtn = `<div class="back-btn" onclick="renderDashboardHome()"><span>‚Üê</span> Back to Dashboard</div>`;
            
            if (view === 'ledger') {
                const cRes = await fetch('/chain_data');
                const cData = await cRes.json();
                
                container.innerHTML = `
                    <div class="view-section fade-in" style="min-height:85vh;">
                        <div class="view-header">
                            <h3 class="view-title">Consortium Ledger (Live)</h3>
                            ${backBtn}
                        </div>
                        <div class="snake-wrapper" id="snake-viz"></div>
                    </div>
                `;
                renderSnake(cData);

            } else if (view === 'pending') {
                const pRes = await fetch('/get_pending');
                const pData = await pRes.json();
                
                let listHtml = pData.length ? pData.map(req => `
                    <div style="background:rgba(255,255,255,0.05); padding:25px; border-radius:16px; margin-bottom:15px; display:flex; justify-content:space-between; align-items:center; border:1px solid rgba(255,255,255,0.1);">
                        <div>
                            <strong style="font-size:1.2rem; color:var(--primary);">${req.username}</strong><br>
                            <span style="font-family:'Space Grotesk', monospace; color:var(--text-muted); letter-spacing:1px;">Aadhar: ${req.id_number}</span>
                        </div>
                        <button class="btn btn-primary" style="width:auto;" onclick="approve('${req.username}')">Mint to Chain</button>
                    </div>
                `).join('') : '<div style="text-align:center; padding:60px; color:var(--text-muted); font-size:1.2rem;">All requests processed.</div>';

                container.innerHTML = `
                    <div class="view-section fade-in">
                        <div class="view-header">
                            <h3 class="view-title">Identity Queue</h3>
                            ${backBtn}
                        </div>
                        ${listHtml}
                    </div>
                `;

            } else if (view === 'integrity') {
                const cRes = await fetch('/chain_data');
                const cData = await cRes.json();
                const isSecure = cData.is_valid;
                const canRepair = currentUser.org === 'Gov'; 
                
                container.innerHTML = `
                    <div class="view-section fade-in" style="display:flex; flex-direction:column; align-items:center; justify-content:center;">
                        <div class="view-header" style="width:100%;">
                            <h3 class="view-title">Security Audit</h3>
                            ${backBtn}
                        </div>
                        
                        <div style="text-align:center; margin-top:20px;">
                            <div style="font-size:6rem; margin-bottom:20px; filter:drop-shadow(0 0 30px ${isSecure ? 'var(--success)' : 'var(--danger)'})">${isSecure ? 'üõ°Ô∏è' : 'üö®'}</div>
                            <h2 style="margin-bottom:15px; font-size:2.5rem; font-family:var(--font-display);">System Status: <span style="color:${isSecure ? 'var(--success)' : 'var(--danger)'}">${isSecure ? 'OPTIMAL' : 'BREACHED'}</span></h2>
                            <p style="color:var(--text-muted); max-width:600px; margin:0 auto 30px auto; font-size:1.1rem; line-height:1.6;">
                                ${isSecure ? 'Cryptographic signatures match. The chain of custody is unbroken. No tampering detected.' : 'CRITICAL WARNING: Hash mismatch detected. The ledger has been altered illicitly. All write operations are suspended.'}
                            </p>
                            
                            ${!isSecure && canRepair ? `<button class="btn btn-danger" style="max-width:350px;" onclick="repairChain()">INITIATE REPAIR SEQUENCE</button>` : ''}
                            ${!isSecure && !canRepair ? `<div style="color:var(--danger);">Note: Only Government Node (Issuer) can initiate repairs.</div>` : ''}
                        </div>
                    </div>
                `;
            }
        }

        // --- USER VIEWS ---
        function loadUserView(view) {
            const container = document.getElementById('main-container');
            const backBtn = `<div class="back-btn" onclick="renderDashboardHome()"><span>‚Üê</span> Back to Dashboard</div>`;

            if (view === 'status') {
                let content = '';
                if (currentUser.status === 'approved') {
                    content = `
                        <div class="id-card-scene fade-in">
                            <div class="id-card-preview">
                                <div style="display:flex; justify-content:space-between; align-items:flex-start;">
                                    <div style="display:flex; align-items:center; gap:10px;">
                                        <div style="font-size:2rem;">üáÆüá≥</div>
                                        <div>
                                            <h3 style="margin:0; font-size:1rem; color:white;">GOVERNMENT OF INDIA</h3>
                                            <span style="font-size:0.6rem; letter-spacing:2px; opacity:0.8; color:var(--cyan);">SECURE ID CONSORTIUM</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="chip-container" style="margin-top:30px;">
                                    <div class="chip"></div>
                                    <div style="font-size:1.5rem; color:white; opacity:0.8;">üì∂</div>
                                </div>
                                
                                <h1 style="margin-bottom:5px; font-size:1.8rem; text-shadow:0 2px 4px rgba(0,0,0,0.5); letter-spacing:1px; color:white;">${currentUser.username.toUpperCase()}</h1>
                                <p style="font-family:'Space Grotesk', monospace; font-size:1.4rem; letter-spacing:3px; color:var(--accent); text-shadow:0 0 15px var(--accent-glow);">${currentUser.aadhar.replace(/(\d{4})(?=\d)/g, '$1 ')}</p>
                                
                                <div style="margin-top:30px; display:flex; justify-content:space-between; font-size:0.6rem; opacity:0.7; border-top:1px solid rgba(255,255,255,0.2); padding-top:15px; color:var(--text-muted);">
                                    <span>BLOCKCHAIN VERIFIED</span>
                                    <span>SHA-256 ENCRYPTED</span>
                                </div>
                            </div>
                        </div>
                        <div style="text-align:center; margin-top:40px;">
                            <button class="btn btn-primary" style="max-width:300px;" onclick="downloadPDF()">Download Official PDF</button>
                        </div>
                    `;
                } else if (currentUser.status === 'pending') {
                    content = `<div style="text-align:center; padding:50px;" class="fade-in"><div style="font-size:4rem; margin-bottom:20px;">‚è≥</div><h2 style="font-family:var(--font-display);">Verification Pending</h2><p style="color:var(--text-muted);">Your data is being hashed and mined by the admin.</p></div>`;
                } else {
                    content = `
                        <div style="max-width:500px; margin:0 auto;" class="fade-in">
                            <h3 style="font-family:var(--font-display); font-size:1.5rem;">Register Digital Identity</h3>
                            <p style="color:var(--text-muted); margin-bottom:25px;">Enter your 12-digit Aadhar number to permanently mint your block.</p>
                            <input type="text" id="aadhar-input" class="input-box" placeholder="Ex: 1234 5678 9012" maxlength="12">
                            <button class="btn btn-primary" onclick="submitAadhar()">Submit for Minting</button>
                        </div>
                    `;
                }
                
                container.innerHTML = `
                    <div class="view-section fade-in">
                        <div class="view-header"><h3 class="view-title">My Digital Identity</h3>${backBtn}</div>
                        ${content}
                    </div>
                `;
                
                if (currentUser.status === 'approved') {
                    setTimeout(() => {
                        new QRCode(document.getElementById("qr-code-hidden"), {
                            text: currentUser.aadhar,
                            width: 150, height: 150,
                            colorDark : "#000000", colorLight : "#ffffff",
                            correctLevel : QRCode.CorrectLevel.H
                        });
                    }, 100);
                }

            } else if (view === 'verify') {
                container.innerHTML = `
                    <div class="view-section fade-in">
                        <div class="view-header"><h3 class="view-title">Self-Verification Tool</h3>${backBtn}</div>
                        <div style="max-width:500px; margin:0 auto; text-align:center;">
                            <p style="margin-bottom:25px; color:var(--text-muted);">Verify the integrity of your own secure ID against the ledger.</p>
                            
                            <input type="text" id="verify-input" class="input-box" placeholder="Enter your 12-digit ID" maxlength="12">
                            <button class="btn btn-outline" onclick="verifyID()">Run Security Check</button>
                            
                            <div id="verify-result" style="margin-top:30px; padding:25px; border-radius:16px; transition:0.3s;" class="hidden"></div>
                        </div>
                    </div>
                `;

            } else if (view === 'learn') {
                container.innerHTML = `
                    <div class="view-section fade-in">
                        <div class="view-header"><h3 class="view-title">System Architecture</h3>${backBtn}</div>
                        <div style="max-width:700px; margin:0 auto;">
                            <div style="display:flex; gap:25px; margin-bottom:40px;">
                                <div style="font-size:2.5rem;">üîí</div>
                                <div>
                                    <h4 style="color:var(--primary); font-size:1.3rem; margin-bottom:5px; font-family:var(--font-display);">SHA-256 Hashing</h4>
                                    <p style="color:var(--text-muted); line-height:1.6;">Your ID is converted into a 64-character hexadecimal string. Even a single digit change results in a completely different hash.</p>
                                </div>
                            </div>
                            <div style="display:flex; gap:25px; margin-bottom:40px;">
                                <div style="font-size:2.5rem;">üîó</div>
                                <div>
                                    <h4 style="color:var(--primary); font-size:1.3rem; margin-bottom:5px; font-family:var(--font-display);">Immutable Chaining</h4>
                                    <p style="color:var(--text-muted); line-height:1.6;">Block N contains the hash of Block N-1. This creates a dependency chain. Altering old data breaks the link.</p>
                                </div>
                            </div>
                            <div style="display:flex; gap:25px;">
                                <div style="font-size:2.5rem;">üåê</div>
                                <div>
                                    <h4 style="color:var(--primary); font-size:1.3rem; margin-bottom:5px; font-family:var(--font-display);">Consortium Validation</h4>
                                    <p style="color:var(--text-muted); line-height:1.6;">Admins act as nodes validating requests before they are added to the permanent ledger.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }
        }

        // --- SHARED ACTIONS ---
        async function submitAadhar() {
            const num = document.getElementById('aadhar-input').value;
            const res = await fetch('/register_aadhar', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({ username: currentUser.username, id_number: num })
            });
            const data = await res.json();
            
            showToast(data.message, data.status === 'success' ? 'success' : 'error');
            
            if(data.status === 'success') {
                currentUser.status = 'pending';
                loadUserView('status');
            }
        }

        async function verifyID() {
            const num = document.getElementById('verify-input').value;
            const resArea = document.getElementById('verify-result');
            
            if (currentUser.aadhar && num !== currentUser.aadhar) {
                resArea.className = '';
                resArea.style.background = 'rgba(244, 63, 94, 0.1)';
                resArea.style.border = '1px solid var(--danger)';
                resArea.innerHTML = `<strong style="color:var(--danger); font-size:1.2rem;">ACCESS DENIED</strong><p style="margin-top:5px;">Security Protocol Violation: You are only authorized to verify your own Identity.</p>`;
                resArea.classList.remove('hidden');
                showToast("Verification attempt blocked.", 'error');
                return;
            }

            resArea.innerHTML = "Scanning Distributed Ledger...";
            resArea.classList.remove('hidden');
            resArea.style.background = 'rgba(255,255,255,0.05)';
            resArea.style.border = 'none';

            setTimeout(() => {
                if (num === currentUser.aadhar) {
                    resArea.style.background = 'rgba(16, 185, 129, 0.1)';
                    resArea.style.border = '1px solid var(--success)';
                    resArea.innerHTML = `
                        <div style="font-size:3rem; margin-bottom:15px; filter:drop-shadow(0 0 10px var(--success));">üõ°Ô∏è</div>
                        <strong style="color:var(--success); font-size:1.4rem; font-family:var(--font-display);">SECURED & VERIFIED</strong>
                        <p style="margin-top:10px; color:var(--text-muted);">This ID matches the immutable record on block #${Math.floor(Math.random() * 10) + 2}.</p>
                    `;
                    showToast("Identity successfully verified.", 'success');
                } else {
                     resArea.style.background = 'rgba(244, 63, 94, 0.1)';
                     resArea.style.border = '1px solid var(--danger)';
                     resArea.innerHTML = `<strong style="color:var(--danger);">NOT FOUND</strong><p>This ID is not in your records.</p>`;
                }
            }, 1500);
        }

        async function approve(user) {
            const res = await fetch('/approve_request', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({ username: user })
            });
            const data = await res.json();
            showToast(data.message, 'success');
            loadAdminView('pending');
        }

        async function repairChain() {
            const res = await fetch('/repair', { method: 'POST' });
            const data = await res.json();
            showToast(data.message, 'success');
            loadAdminView('integrity');
        }

        function renderSnake(data) {
            const container = document.getElementById('snake-viz');
            
            const chunkSize = 4;
            const chain = data.chain;
            let rowsHtml = '';
            
            for (let i = 0; i < chain.length; i += chunkSize) {
                const chunk = chain.slice(i, i + chunkSize);
                const isReverse = (i / chunkSize) % 2 !== 0; 
                
                const blocksHtml = chunk.map(block => {
                    const isTampered = data.tampered_block_index === block.index;
                    const classes = `block-node ${isTampered ? 'tampered' : ''}`;
                    const safeData = JSON.stringify(block).replace(/"/g, '&quot;');
                    
                    return `
                        <div class="${classes}" onclick="openBlockModal('${safeData}')">
                            <div style="font-weight:800; font-size:2.5rem; color:var(--text-main); font-family:var(--font-display);">#${block.index}</div>
                            ${isTampered ? '<div style="background:var(--danger); padding:5px 10px; border-radius:5px; font-weight:bold; margin-top:10px; font-size:0.8rem;">CORRUPTED</div>' : ''}
                        </div>
                    `;
                }).join('');

                rowsHtml += `<div class="snake-row ${isReverse ? 'reverse' : ''}">${blocksHtml}</div>`;
            }
            
            container.innerHTML = rowsHtml;
        }

        function openBlockModal(blockStr) {
            const block = JSON.parse(blockStr);
            const modal = document.getElementById('block-modal');
            const body = document.getElementById('modal-body');
            
            body.innerHTML = `
                <div style="margin-bottom:25px;">
                    <strong style="color:var(--primary); font-size:0.9rem; text-transform:uppercase;">Timestamp</strong>
                    <div style="font-size:1.1rem; color:white;">${block.timestamp}</div>
                </div>
                <div style="margin-bottom:25px;">
                    <strong style="color:var(--primary); font-size:0.9rem; text-transform:uppercase;">Previous Hash (Link)</strong>
                    <div class="hash-text">${block.previous_hash}</div>
                </div>
                <div style="margin-bottom:25px;">
                    <strong style="color:var(--primary); font-size:0.9rem; text-transform:uppercase;">Data Payload</strong>
                    <div class="hash-text" style="color:white;">${block.data}</div>
                </div>
                <div style="margin-bottom:10px;">
                    <strong style="color:var(--accent); font-size:0.9rem; text-transform:uppercase;">Block Signature (Hash)</strong>
                    <div class="hash-text" style="color:var(--accent); border-color:var(--accent);">${block.hash}</div>
                </div>
            `;
            modal.classList.remove('hidden');
        }

        function closeModal() {
            document.getElementById('block-modal').classList.add('hidden');
        }

        function downloadPDF() {
            const doc = new jsPDF();
            
            const hiddenDiv = document.getElementById('qr-code-hidden');
            setTimeout(() => {
                const qrImgElement = hiddenDiv.querySelector('img');
                let qrImg = '';
                if(qrImgElement) qrImg = qrImgElement.src;
                
                // Background
                doc.setFillColor(15, 5, 41); // Deep Purple Dark
                doc.rect(0, 0, 210, 297, 'F');
                
                // Card Body
                doc.setDrawColor(139, 92, 246);
                doc.setLineWidth(1);
                doc.setFillColor(30, 16, 60); 
                doc.roundedRect(20, 40, 170, 110, 5, 5, 'FD');
                
                // Header
                doc.setTextColor(255, 255, 255);
                doc.setFont("helvetica", "bold");
                doc.setFontSize(22);
                doc.text("OFFICIAL DIGITAL IDENTITY", 105, 55, null, null, "center");
                
                doc.setFontSize(10);
                doc.setFont("helvetica", "normal");
                doc.setTextColor(139, 92, 246); // Primary Color text
                doc.text("GOVERNMENT OF INDIA CONSORTIUM", 105, 62, null, null, "center");
                
                doc.setDrawColor(200, 200, 200);
                doc.setLineWidth(0.5);
                doc.line(30, 68, 180, 68);
                
                // Data
                doc.setFontSize(14);
                doc.setTextColor(150, 150, 150);
                doc.text("LEGAL NAME", 35, 80);
                
                doc.setFontSize(22);
                doc.setFont("helvetica", "bold");
                doc.setTextColor(255, 255, 255);
                doc.text(currentUser.username.toUpperCase(), 35, 90);
                
                doc.setFontSize(14);
                doc.setTextColor(150, 150, 150);
                doc.setFont("helvetica", "normal");
                doc.text("AADHAR NUMBER", 35, 110);
                
                doc.setFontSize(24);
                doc.setFont("courier", "bold");
                doc.setTextColor(217, 70, 239); // Accent Pink
                doc.text(currentUser.aadhar.replace(/(\d{4})(?=\d)/g, '$1 '), 35, 122);
                
                if(qrImg) {
                    doc.addImage(qrImg, 'PNG', 145, 80, 35, 35);
                }
                
                doc.setFontSize(8);
                doc.setTextColor(100, 100, 100);
                doc.setFont("helvetica", "italic");
                doc.text("Authenticity of this card can be verified via the Consortium Blockchain Ledger.", 105, 145, null, null, "center");
                
                doc.save("BlockSecured_Card.pdf");
                showToast("High-Res PDF Generated!", 'success');
            }, 300);
        }
    </script>
</body>
</html>